<section class="game-frame">
  <!-- Canvas -->
  <canvas #canvas class="game-canvas"></canvas>

  <!-- Exit -->
  <a routerLink="/" class="exit-btn">Exit</a>

  <!-- HUD -->
  <div class="hud">
    <div class="hud-item">
      Score: <span class="font-semibold">{{ score() }}</span>
    </div>
    <div class="hud-item">
      Level: <span class="font-semibold">{{ level() }}</span>
    </div>
    @if (combo() > 1) {
      <div class="hud-combo">
        Combo x{{ combo() }}
        <div class="combo-bar">
          <div class="combo-fill" [style.width.%]="comboTimer()"></div>
        </div>
      </div>
    }
  </div>

  <!-- Progress Bar -->
  <div class="progress-bar">
    <div class="progress-fill" [style.width.%]="progress()"></div>
  </div>

  <!-- Toast Messages -->
  <div class="toast-container">
    @for (t of toasts; track t.id) {
      <div class="toast animate-pop">{{ t.text }}</div>
    }
  </div>

  <!-- Tip -->
  <div class="tip">
    POP THE BALLOONS<br>
    Watch out for bombs after Level 3
  </div>

  <!-- Start Screen -->
  @if (showStartScreen()) {
    <div class="overlay">
      <button class="start-btn" (click)="startGame()">Start Now!</button>
    </div>
  }

  <!-- Countdown -->
  @if (countdown() > 0) {
    <div class="overlay">
      <div class="countdown">{{ countdown() }}</div>
    </div>
  }

<!-- Game Over -->
@if (gameOver()) {
  <div class="overlay" (click)="backToStart()">
    <div class="game-over">
      Game Over<br>
      <span class="text-sm">Final Score: {{ score() }}</span><br>
      <span class="text-sm">Click Anywhere to play again</span>
    </div>
  </div>
}

</section>
